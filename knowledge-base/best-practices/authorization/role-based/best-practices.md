# åŸºäºè§’è‰²çš„æˆæƒæœ€ä½³å®è·µ

## ğŸ“‹ æ¦‚è¿°

åŸºäºè§’è‰²çš„æˆæƒï¼ˆRole-Based Authorizationï¼Œç®€ç§°RBAï¼‰æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„æˆæƒæ–¹æ³•ï¼Œå®ƒé€šè¿‡å°†ç”¨æˆ·åˆ†é…åˆ°ç‰¹å®šè§’è‰²ï¼Œç„¶ååŸºäºè¿™äº›è§’è‰²æ§åˆ¶å¯¹èµ„æºçš„è®¿é—®ã€‚æœ¬æŒ‡å—æä¾›äº†å®æ–½åŸºäºè§’è‰²çš„æˆæƒçš„æœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘è€…æ„å»ºå®‰å…¨ã€å¯ç»´æŠ¤çš„æˆæƒç³»ç»Ÿã€‚

## ğŸ¯ é€‚ç”¨åœºæ™¯

åŸºäºè§’è‰²çš„æˆæƒæœ€ä½³å®è·µé€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š

- ä¼ä¸šåº”ç”¨ï¼Œå¦‚ç®¡ç†ç³»ç»Ÿã€CRMã€ERPç­‰
- éœ€è¦æ˜ç¡®æƒé™åˆ†å±‚çš„åº”ç”¨ï¼Œå¦‚ç®¡ç†å‘˜ã€æ™®é€šç”¨æˆ·ã€è®¿å®¢ç­‰
- æƒé™ç®¡ç†ç›¸å¯¹ç®€å•ï¼Œè§’è‰²æ•°é‡æœ‰é™çš„åº”ç”¨
- æƒé™å˜æ›´ä¸é¢‘ç¹çš„åº”ç”¨

## ğŸ” å®ç°æŒ‡å—

### 1. è§’è‰²è®¾è®¡æœ€ä½³å®è·µ

#### 1.1 è§’è‰²åˆ†å±‚

- **é‡‡ç”¨æ‰å¹³åŒ–è§’è‰²ç»“æ„**ï¼šå°½é‡ä½¿ç”¨æ‰å¹³åŒ–çš„è§’è‰²ç»“æ„ï¼Œé¿å…å¤æ‚çš„è§’è‰²ç»§æ‰¿å…³ç³»
- **å®šä¹‰æ¸…æ™°çš„è§’è‰²è¾¹ç•Œ**ï¼šä¸ºæ¯ä¸ªè§’è‰²å®šä¹‰æ¸…æ™°çš„èŒè´£å’Œæƒé™è¾¹ç•Œ
- **ä½¿ç”¨æœ€å°æƒé™åŸåˆ™**ï¼šæ¯ä¸ªè§’è‰²åªåˆ†é…å®Œæˆå…¶èŒè´£æ‰€éœ€çš„æœ€å°æƒé™
- **é¿å…è§’è‰²è†¨èƒ€**ï¼šæ§åˆ¶è§’è‰²æ•°é‡ï¼Œé¿å…åˆ›å»ºè¿‡å¤šç›¸ä¼¼çš„è§’è‰²

#### 1.2 è§’è‰²å‘½åè§„èŒƒ

- **ä½¿ç”¨æè¿°æ€§åç§°**ï¼šè§’è‰²åç§°åº”æ¸…æ™°æè¿°å…¶èŒè´£ï¼Œå¦‚ `admin`ã€`user`ã€`guest` ç­‰
- **éµå¾ªä¸€è‡´çš„å‘½åçº¦å®š**ï¼šä½¿ç”¨ä¸€è‡´çš„å‘½åçº¦å®šï¼Œå¦‚ `[åŠŸèƒ½]-[çº§åˆ«]` æ ¼å¼
- **é¿å…ä½¿ç”¨æŠ€æœ¯æœ¯è¯­**ï¼šè§’è‰²åç§°åº”ä½¿ç”¨ä¸šåŠ¡æœ¯è¯­ï¼Œä¾¿äºä¸šåŠ¡äººå‘˜ç†è§£

### 2. æƒé™ç®¡ç†æœ€ä½³å®è·µ

#### 2.1 æƒé™è®¾è®¡

- **æƒé™ç²’åº¦é€‚ä¸­**ï¼šæƒé™ç²’åº¦åº”é€‚ä¸­ï¼Œæ—¢ä¸è¿‡ç»†ä¹Ÿä¸è¿‡ç²—
- **æƒé™åˆ†ç±»**ï¼šå°†æƒé™æŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç±»ï¼Œå¦‚ `user:read`ã€`user:write` ç­‰
- **ä½¿ç”¨æƒé™é›†åˆ**ï¼šå°†ç›¸å…³æƒé™ç»„åˆæˆæƒé™é›†åˆï¼Œä¾¿äºç®¡ç†
- **æƒé™ç‰ˆæœ¬æ§åˆ¶**ï¼šå¯¹æƒé™è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œè·Ÿè¸ªæƒé™å˜æ›´å†å²

#### 2.2 æƒé™åˆ†é…

- **åŸºäºä¸šåŠ¡éœ€æ±‚åˆ†é…æƒé™**ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚ä¸ºè§’è‰²åˆ†é…æƒé™
- **å®šæœŸå®¡æŸ¥æƒé™**ï¼šå®šæœŸå®¡æŸ¥è§’è‰²æƒé™ï¼Œç¡®ä¿æƒé™åˆ†é…åˆç†
- **æƒé™å˜æ›´å®¡æ‰¹**ï¼šå»ºç«‹æƒé™å˜æ›´å®¡æ‰¹æµç¨‹ï¼Œç¡®ä¿æƒé™å˜æ›´çš„å®‰å…¨æ€§
- **æƒé™å˜æ›´é€šçŸ¥**ï¼šæƒé™å˜æ›´ååŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜

### 3. å‰ç«¯å®ç°æœ€ä½³å®è·µ

#### 3.1 çŠ¶æ€ç®¡ç†

- **é›†ä¸­ç®¡ç†ç”¨æˆ·è§’è‰²**ï¼šä½¿ç”¨çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚Reduxã€Vuexã€Piniaï¼‰é›†ä¸­ç®¡ç†ç”¨æˆ·è§’è‰²ä¿¡æ¯
- **æŒä¹…åŒ–å­˜å‚¨**ï¼šä½¿ç”¨å®‰å…¨çš„å­˜å‚¨æ–¹å¼ï¼ˆå¦‚åŠ å¯†çš„localStorageï¼‰æŒä¹…åŒ–å­˜å‚¨ç”¨æˆ·è§’è‰²ä¿¡æ¯
- **çŠ¶æ€åŒæ­¥**ï¼šç¡®ä¿å‰ç«¯çŠ¶æ€ä¸åç«¯çŠ¶æ€ä¿æŒåŒæ­¥
- **çŠ¶æ€æ¸…ç†**ï¼šç”¨æˆ·ç™»å‡ºæˆ–ä¼šè¯è¿‡æœŸæ—¶åŠæ—¶æ¸…ç†ç”¨æˆ·è§’è‰²ä¿¡æ¯

#### 3.2 è®¿é—®æ§åˆ¶

- **è·¯ç”±çº§è®¿é—®æ§åˆ¶**ï¼šä½¿ç”¨è·¯ç”±å®ˆå«å®ç°è·¯ç”±çº§åˆ«çš„è®¿é—®æ§åˆ¶
- **ç»„ä»¶çº§è®¿é—®æ§åˆ¶**ï¼šä½¿ç”¨é«˜é˜¶ç»„ä»¶æˆ–æŒ‡ä»¤å®ç°ç»„ä»¶çº§åˆ«çš„è®¿é—®æ§åˆ¶
- **åŠŸèƒ½çº§è®¿é—®æ§åˆ¶**ï¼šå®ç°åŠŸèƒ½çº§åˆ«çš„è®¿é—®æ§åˆ¶ï¼Œæ ¹æ®è§’è‰²å¯ç”¨æˆ–ç¦ç”¨ç‰¹å®šåŠŸèƒ½
- **åŠ¨æ€UI**ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²åŠ¨æ€è°ƒæ•´UIï¼Œå¦‚æ˜¾ç¤ºæˆ–éšè—æŒ‰é’®ã€èœå•ç­‰

#### 3.3 å®‰å…¨æªæ–½

- **å‰ç«¯ä¸åç«¯åŒé‡éªŒè¯**ï¼šåœ¨å‰ç«¯å’Œåç«¯éƒ½å®ç°æˆæƒæ§åˆ¶
- **é˜²æ­¢å‰ç«¯ç¯¡æ”¹**ï¼šä½¿ç”¨å®‰å…¨çš„æ–¹å¼å­˜å‚¨ç”¨æˆ·è§’è‰²ä¿¡æ¯ï¼Œé˜²æ­¢å‰ç«¯ç¯¡æ”¹
- **APIè¯·æ±‚éªŒè¯**ï¼šåœ¨å‘é€APIè¯·æ±‚å‰éªŒè¯ç”¨æˆ·æƒé™
- **é”™è¯¯å¤„ç†**ï¼šå½“ç”¨æˆ·æ²¡æœ‰æƒé™æ—¶ï¼Œæä¾›é€‚å½“çš„é”™è¯¯å¤„ç†å’Œåé¦ˆ

### 4. åç«¯å®ç°æœ€ä½³å®è·µ

#### 4.1 APIæˆæƒ

- **APIè·¯ç”±ä¿æŠ¤**ï¼šå®ç°APIè·¯ç”±çº§åˆ«çš„è®¿é—®æ§åˆ¶
- **è¯·æ±‚éªŒè¯**ï¼šéªŒè¯æ¯ä¸ªAPIè¯·æ±‚çš„ç”¨æˆ·æƒé™
- **æƒé™ç¼“å­˜**ï¼šä½¿ç”¨ç¼“å­˜æé«˜æƒé™éªŒè¯çš„æ€§èƒ½
- **å®¡è®¡æ—¥å¿—**ï¼šè®°å½•ç”¨æˆ·çš„æƒé™å˜æ›´å’Œè®¿é—®è¡Œä¸º

#### 4.2 ä¼šè¯ç®¡ç†

- **å®‰å…¨çš„ä¼šè¯ç®¡ç†**ï¼šä½¿ç”¨å®‰å…¨çš„ä¼šè¯ç®¡ç†æœºåˆ¶ï¼Œå¦‚JWT
- **ä¼šè¯è¿‡æœŸ**ï¼šè®¾ç½®åˆç†çš„ä¼šè¯è¿‡æœŸæ—¶é—´
- **ä¼šè¯åˆ·æ–°**ï¼šå®ç°ä¼šè¯åˆ·æ–°æœºåˆ¶ï¼Œé¿å…é¢‘ç¹ç™»å½•
- **ä¼šè¯æ³¨é”€**ï¼šå®ç°å®‰å…¨çš„ä¼šè¯æ³¨é”€æœºåˆ¶

### 5. é›†æˆä¸éƒ¨ç½²æœ€ä½³å®è·µ

#### 5.1 ç¯å¢ƒé…ç½®

- **ç¯å¢ƒåˆ†ç¦»**ï¼šä¸ºä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰é…ç½®ä¸åŒçš„æˆæƒè®¾ç½®
- **é…ç½®ç®¡ç†**ï¼šä½¿ç”¨é…ç½®ç®¡ç†å·¥å…·ç®¡ç†æˆæƒé…ç½®
- **å¯†é’¥ç®¡ç†**ï¼šå®‰å…¨ç®¡ç†æˆæƒç›¸å…³çš„å¯†é’¥å’Œå‡­è¯

#### 5.2 ç›‘æ§ä¸å‘Šè­¦

- **æˆæƒäº‹ä»¶ç›‘æ§**ï¼šç›‘æ§æˆæƒç›¸å…³çš„äº‹ä»¶ï¼Œå¦‚ç™»å½•ã€æƒé™å˜æ›´ç­‰
- **å¼‚å¸¸è¡Œä¸ºæ£€æµ‹**ï¼šæ£€æµ‹å’Œå‘Šè­¦å¼‚å¸¸çš„æˆæƒè¡Œä¸º
- **æ€§èƒ½ç›‘æ§**ï¼šç›‘æ§æˆæƒç³»ç»Ÿçš„æ€§èƒ½ï¼Œç¡®ä¿åœ¨é«˜è´Ÿè½½ä¸‹ä»èƒ½æ­£å¸¸å·¥ä½œ
- **å¯ç”¨æ€§ç›‘æ§**ï¼šç›‘æ§æˆæƒç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œç¡®ä¿ç³»ç»Ÿæ­£å¸¸è¿è¡Œ

## ğŸ“š ä»£ç ç¤ºä¾‹

### Vue 3 æœ€ä½³å®è·µç¤ºä¾‹

```vue
// src/composables/useAuth.js
import { ref, computed } from 'vue'
import { useRouter } from 'vue-router'

const userRole = ref(localStorage.getItem('userRole') || null)
const router = useRouter()

// è§’è‰²æƒé™æ˜ å°„
const ROLE_PERMISSIONS = {
  admin: ['user:read', 'user:write', 'user:delete', 'user:manage', 'dashboard:access'],
  user: ['user:read', 'user:write', 'dashboard:access'],
  guest: ['user:read']
}

// è·¯ç”±æƒé™æ˜ å°„
const ROUTE_PERMISSIONS = {
  '/admin': ['admin'],
  '/user/profile': ['admin', 'user'],
  '/public': ['admin', 'user', 'guest']
}

export function useAuth() {
  // ç™»å½•
  const login = async (credentials) => {
    try {
      const response = await fetch('/api/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(credentials)
      })
      
      if (!response.ok) {
        throw new Error('ç™»å½•å¤±è´¥')
      }
      
      const data = await response.json()
      if (data.success) {
        userRole.value = data.role
        // ä½¿ç”¨åŠ å¯†å­˜å‚¨
        localStorage.setItem('userRole', btoa(data.role))
        return true
      }
      return false
    } catch (error) {
      console.error('ç™»å½•é”™è¯¯:', error)
      return false
    }
  }
  
  // ç™»å‡º
  const logout = () => {
    userRole.value = null
    localStorage.removeItem('userRole')
    router.push('/login')
  }
  
  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å…·æœ‰ç‰¹å®šè§’è‰²
  const hasRole = (role) => {
    return userRole.value === role
  }
  
  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å…·æœ‰ç‰¹å®šæƒé™
  const hasPermission = (permission) => {
    const role = userRole.value
    return ROLE_PERMISSIONS[role]?.includes(permission) || false
  }
  
  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®ç‰¹å®šè·¯ç”±
  const canAccessRoute = (routePath) => {
    const allowedRoles = ROUTE_PERMISSIONS[routePath]
    if (!allowedRoles) {
      return true // æœªé…ç½®çš„è·¯ç”±é»˜è®¤å…è®¸è®¿é—®
    }
    return allowedRoles.includes(userRole.value)
  }
  
  // è®¡ç®—å±æ€§ï¼šå½“å‰ç”¨æˆ·è§’è‰²
  const currentRole = computed(() => userRole.value)
  
  // è®¡ç®—å±æ€§ï¼šç”¨æˆ·æ˜¯å¦å·²ç™»å½•
  const isAuthenticated = computed(() => !!userRole.value)
  
  return {
    login,
    logout,
    hasRole,
    hasPermission,
    canAccessRoute,
    currentRole,
    isAuthenticated
  }
}

// src/router/index.js
import { createRouter, createWebHistory } from 'vue-router'
import { useAuth } from '../composables/useAuth'

const routes = [
  {
    path: '/login',
    component: () => import('../views/LoginView.vue')
  },
  {
    path: '/admin',
    component: () => import('../views/AdminView.vue'),
    meta: { requiresAuth: true, requiredRole: 'admin' }
  },
  {
    path: '/user/profile',
    component: () => import('../views/UserProfileView.vue'),
    meta: { requiresAuth: true, requiredRoles: ['admin', 'user'] }
  },
  {
    path: '/public',
    component: () => import('../views/PublicView.vue')
  }
]

const router = createRouter({
  history: createWebHistory(),
  routes
})

// è·¯ç”±å®ˆå«
router.beforeEach((to, from, next) => {
  const { isAuthenticated, hasRole } = useAuth()
  
  // æ£€æŸ¥æ˜¯å¦éœ€è¦è®¤è¯
  if (to.meta.requiresAuth) {
    if (!isAuthenticated.value) {
      // æœªç™»å½•ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µ
      next('/login')
      return
    }
    
    // æ£€æŸ¥è§’è‰²æƒé™
    if (to.meta.requiredRole) {
      if (!hasRole(to.meta.requiredRole)) {
        // æ— æƒé™ï¼Œé‡å®šå‘åˆ°æ— æƒé™é¡µé¢
        next('/unauthorized')
        return
      }
    } else if (to.meta.requiredRoles) {
      const hasRequiredRole = to.meta.requiredRoles.some(role => hasRole(role))
      if (!hasRequiredRole) {
        // æ— æƒé™ï¼Œé‡å®šå‘åˆ°æ— æƒé™é¡µé¢
        next('/unauthorized')
        return
      }
    }
  }
  
  next()
})

export default router

// src/directives/permission.js
import { useAuth } from '../composables/useAuth'

export const permission = {
  mounted(el, binding) {
    const { hasPermission } = useAuth()
    const permission = binding.value
    
    if (!hasPermission(permission)) {
      el.style.display = 'none'
    }
  },
  updated(el, binding) {
    const { hasPermission } = useAuth()
    const permission = binding.value
    
    if (!hasPermission(permission)) {
      el.style.display = 'none'
    } else {
      el.style.display = ''
    }
  }
}

// src/main.js
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import { permission } from './directives/permission'

const app = createApp(App)
app.directive('permission', permission)
app.use(router)
app.mount('#app')

// ä½¿ç”¨ç¤ºä¾‹
<template>
  <div>
    <h1>ç”¨æˆ·ç®¡ç†</h1>
    <button v-permission="'user:read'">æŸ¥çœ‹ç”¨æˆ·</button>
    <button v-permission="'user:write'">ç¼–è¾‘ç”¨æˆ·</button>
    <button v-permission="'user:delete'">åˆ é™¤ç”¨æˆ·</button>
    <button v-permission="'user:manage'">ç®¡ç†ç”¨æˆ·</button>
  </div>
</template>
```

### React æœ€ä½³å®è·µç¤ºä¾‹

```jsx
// src/hooks/useAuth.js
import { useState, useEffect, useCallback } from 'react';
import { useNavigate } from 'react-router-dom';

// è§’è‰²æƒé™æ˜ å°„
const ROLE_PERMISSIONS = {
  admin: ['user:read', 'user:write', 'user:delete', 'user:manage', 'dashboard:access'],
  user: ['user:read', 'user:write', 'dashboard:access'],
  guest: ['user:read']
};

// è·¯ç”±æƒé™æ˜ å°„
const ROUTE_PERMISSIONS = {
  '/admin': ['admin'],
  '/user/profile': ['admin', 'user'],
  '/public': ['admin', 'user', 'guest']
};

export function useAuth() {
  const [userRole, setUserRole] = useState(() => {
    const storedRole = localStorage.getItem('userRole');
    return storedRole ? atob(storedRole) : null;
  });
  const navigate = useNavigate();

  // ç™»å½•
  const login = useCallback(async (credentials) => {
    try {
      const response = await fetch('/api/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(credentials)
      });
      
      if (!response.ok) {
        throw new Error('ç™»å½•å¤±è´¥');
      }
      
      const data = await response.json();
      if (data.success) {
        setUserRole(data.role);
        // ä½¿ç”¨åŠ å¯†å­˜å‚¨
        localStorage.setItem('userRole', btoa(data.role));
        return true;
      }
      return false;
    } catch (error) {
      console.error('ç™»å½•é”™è¯¯:', error);
      return false;
    }
  }, []);
  
  // ç™»å‡º
  const logout = useCallback(() => {
    setUserRole(null);
    localStorage.removeItem('userRole');
    navigate('/login');
  }, [navigate]);
  
  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å…·æœ‰ç‰¹å®šè§’è‰²
  const hasRole = useCallback((role) => {
    return userRole === role;
  }, [userRole]);
  
  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å…·æœ‰ç‰¹å®šæƒé™
  const hasPermission = useCallback((permission) => {
    return ROLE_PERMISSIONS[userRole]?.includes(permission) || false;
  }, [userRole]);
  
  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®ç‰¹å®šè·¯ç”±
  const canAccessRoute = useCallback((routePath) => {
    const allowedRoles = ROUTE_PERMISSIONS[routePath];
    if (!allowedRoles) {
      return true; // æœªé…ç½®çš„è·¯ç”±é»˜è®¤å…è®¸è®¿é—®
    }
    return allowedRoles.includes(userRole);
  }, [userRole]);
  
  return {
    userRole,
    login,
    logout,
    hasRole,
    hasPermission,
    canAccessRoute,
    isAuthenticated: !!userRole
  };
}

// src/components/ProtectedRoute.jsx
import React from 'react';
import { Navigate } from 'react-router-dom';
import { useAuth } from '../hooks/useAuth';

const ProtectedRoute = ({ requiredRole, requiredRoles, children }) => {
  const { isAuthenticated, hasRole } = useAuth();
  
  if (!isAuthenticated) {
    return <Navigate to="/login" />;
  }
  
  if (requiredRole) {
    if (!hasRole(requiredRole)) {
      return <Navigate to="/unauthorized" />;
    }
  } else if (requiredRoles) {
    const hasRequiredRole = requiredRoles.some(role => hasRole(role));
    if (!hasRequiredRole) {
      return <Navigate to="/unauthorized" />;
    }
  }
  
  return children;
};

export default ProtectedRoute;

// src/components/PermissionButton.jsx
import React from 'react';
import { useAuth } from '../hooks/useAuth';

const PermissionButton = ({ permission, children, ...props }) => {
  const { hasPermission } = useAuth();
  
  if (!hasPermission(permission)) {
    return null;
  }
  
  return <button {...props}>{children}</button>;
};

export default PermissionButton;

// ä½¿ç”¨ç¤ºä¾‹
import React from 'react';
import PermissionButton from './PermissionButton';

const UserManagement = () => {
  return (
    <div>
      <h1>ç”¨æˆ·ç®¡ç†</h1>
      <PermissionButton permission="user:read">æŸ¥çœ‹ç”¨æˆ·</PermissionButton>
      <PermissionButton permission="user:write">ç¼–è¾‘ç”¨æˆ·</PermissionButton>
      <PermissionButton permission="user:delete">åˆ é™¤ç”¨æˆ·</PermissionButton>
      <PermissionButton permission="user:manage">ç®¡ç†ç”¨æˆ·</PermissionButton>
    </div>
  );
};

export default UserManagement;
```

## ğŸ› ï¸ å·¥å…·æ¨è

- **CASL**ï¼šåŠŸèƒ½å¼ºå¤§çš„åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶åº“ï¼Œæ”¯æŒVueã€Reactç­‰æ¡†æ¶
- **@casl/vue**ï¼šCASLçš„Vueé›†æˆ
- **@casl/react**ï¼šCASLçš„Reacté›†æˆ
- **vue-router**ï¼šVueçš„è·¯ç”±åº“ï¼Œå¯ç”¨äºå®ç°è·¯ç”±çº§åˆ«çš„è®¿é—®æ§åˆ¶
- **react-router**ï¼šReactçš„è·¯ç”±åº“ï¼Œå¯ç”¨äºå®ç°è·¯ç”±çº§åˆ«çš„è®¿é—®æ§åˆ¶
- **Redux**/**Vuex**/**Pinia**ï¼šçŠ¶æ€ç®¡ç†åº“ï¼Œå¯ç”¨äºå­˜å‚¨ç”¨æˆ·è§’è‰²ä¿¡æ¯
- **JWT**ï¼šæ— çŠ¶æ€çš„è®¤è¯æœºåˆ¶ï¼Œå¯ç”¨äºåœ¨å‰ç«¯å’Œåç«¯ä¹‹é—´ä¼ é€’ç”¨æˆ·è§’è‰²ä¿¡æ¯
- **Auth0**ï¼šèº«ä»½è®¤è¯å’ŒæˆæƒæœåŠ¡ï¼Œæä¾›å®Œæ•´çš„æˆæƒè§£å†³æ–¹æ¡ˆ
- **Okta**ï¼šèº«ä»½è®¤è¯å’ŒæˆæƒæœåŠ¡ï¼Œæä¾›å®Œæ•´çš„æˆæƒè§£å†³æ–¹æ¡ˆ

## ğŸ“ éªŒè¯æ–¹æ³•

éªŒè¯åŸºäºè§’è‰²çš„æˆæƒæœ€ä½³å®è·µæ˜¯å¦æ­£ç¡®å®æ–½çš„æ–¹æ³•ï¼š

1. **å®‰å…¨å®¡è®¡**ï¼šå®šæœŸè¿›è¡Œå®‰å…¨å®¡è®¡ï¼Œæ£€æŸ¥æˆæƒç³»ç»Ÿçš„å®‰å…¨æ€§
2. **æƒé™å®¡æŸ¥**ï¼šå®šæœŸå®¡æŸ¥è§’è‰²æƒé™ï¼Œç¡®ä¿æƒé™åˆ†é…åˆç†
3. **æ¸—é€æµ‹è¯•**ï¼šè¿›è¡Œæ¸—é€æµ‹è¯•ï¼Œæµ‹è¯•æˆæƒç³»ç»Ÿçš„å®‰å…¨æ€§
4. **ä»£ç å®¡æŸ¥**ï¼šè¿›è¡Œä»£ç å®¡æŸ¥ï¼Œç¡®ä¿æˆæƒä»£ç ç¬¦åˆæœ€ä½³å®è·µ
5. **ç”¨æˆ·åé¦ˆ**ï¼šæ”¶é›†ç”¨æˆ·åé¦ˆï¼Œäº†è§£æˆæƒç³»ç»Ÿçš„å®é™…ä½¿ç”¨æƒ…å†µ

## âš ï¸ å¸¸è§é”™è¯¯

1. **è§’è‰²è®¾è®¡ä¸åˆç†**ï¼š
   - **é”™è¯¯æè¿°**ï¼šè§’è‰²è®¾è®¡ä¸åˆç†ï¼Œå¦‚è§’è‰²è¿‡å¤šã€è§’è‰²è¾¹ç•Œä¸æ¸…ç­‰
   - **é£é™©**ï¼šæƒé™ç®¡ç†å¤æ‚ï¼Œå®¹æ˜“å‡ºç°æƒé™æ¼æ´
   - **è§£å†³æ–¹æ¡ˆ**ï¼šé‡‡ç”¨æ‰å¹³åŒ–è§’è‰²ç»“æ„ï¼Œå®šä¹‰æ¸…æ™°çš„è§’è‰²è¾¹ç•Œï¼Œæ§åˆ¶è§’è‰²æ•°é‡

2. **æƒé™åˆ†é…ä¸å½“**ï¼š
   - **é”™è¯¯æè¿°**ï¼šæƒé™åˆ†é…ä¸å½“ï¼Œå¦‚æƒé™è¿‡ç»†æˆ–è¿‡ç²—ã€æƒé™åˆ†é…ä¸åˆç†ç­‰
   - **é£é™©**ï¼šæƒé™ç®¡ç†å¤æ‚ï¼Œç”¨æˆ·ä½“éªŒå·®ï¼Œå®¹æ˜“å‡ºç°æƒé™æ¼æ´
   - **è§£å†³æ–¹æ¡ˆ**ï¼šæƒé™ç²’åº¦é€‚ä¸­ï¼ŒåŸºäºä¸šåŠ¡éœ€æ±‚åˆ†é…æƒé™ï¼Œä½¿ç”¨æœ€å°æƒé™åŸåˆ™

3. **å‰ç«¯å®‰å…¨æªæ–½ä¸è¶³**ï¼š
   - **é”™è¯¯æè¿°**ï¼šå‰ç«¯å®‰å…¨æªæ–½ä¸è¶³ï¼Œå¦‚è§’è‰²ä¿¡æ¯å­˜å‚¨ä¸å®‰å…¨ã€ç¼ºå°‘å‰ç«¯éªŒè¯ç­‰
   - **é£é™©**ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡ä¿®æ”¹å‰ç«¯ä»£ç æˆ–å­˜å‚¨æ¥ç»•è¿‡æˆæƒæ§åˆ¶
   - **è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨å®‰å…¨çš„å­˜å‚¨æ–¹å¼ï¼Œåœ¨å‰ç«¯å’Œåç«¯éƒ½å®ç°æˆæƒæ§åˆ¶

4. **åç«¯éªŒè¯ç¼ºå¤±**ï¼š
   - **é”™è¯¯æè¿°**ï¼šåªåœ¨å‰ç«¯å®ç°æˆæƒï¼Œæ²¡æœ‰åç«¯éªŒè¯
   - **é£é™©**ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡ç›´æ¥è°ƒç”¨APIæ¥ç»•è¿‡å‰ç«¯æˆæƒæ§åˆ¶
   - **è§£å†³æ–¹æ¡ˆ**ï¼šåœ¨å‰ç«¯å’Œåç«¯éƒ½å®ç°æˆæƒæ§åˆ¶ï¼Œå‰ç«¯æ§åˆ¶ç”¨æˆ·ç•Œé¢ï¼Œåç«¯æ§åˆ¶APIè®¿é—®

5. **æˆæƒç³»ç»Ÿç»´æŠ¤ä¸å½“**ï¼š
   - **é”™è¯¯æè¿°**ï¼šæˆæƒç³»ç»Ÿç»´æŠ¤ä¸å½“ï¼Œå¦‚æƒé™å®¡æŸ¥ä¸åŠæ—¶ã€æƒé™å˜æ›´æ— å®¡æ‰¹ç­‰
   - **é£é™©**ï¼šæˆæƒç³»ç»Ÿå¯èƒ½å‡ºç°å®‰å…¨æ¼æ´ï¼Œæƒé™ç®¡ç†æ··ä¹±
   - **è§£å†³æ–¹æ¡ˆ**ï¼šå®šæœŸå®¡æŸ¥æƒé™ï¼Œå»ºç«‹æƒé™å˜æ›´å®¡æ‰¹æµç¨‹ï¼Œå¯¹æƒé™è¿›è¡Œç‰ˆæœ¬æ§åˆ¶

## ğŸ“š å‚è€ƒèµ„æ–™

- [CASLå®˜æ–¹æ–‡æ¡£](https://casl.js.org/v6/en/)
- [JWTå®˜æ–¹æ–‡æ¡£](https://jwt.io/)
- [Auth0å®˜æ–¹æ–‡æ¡£](https://auth0.com/docs/)
- [Oktaå®˜æ–¹æ–‡æ¡£](https://developer.okta.com/docs/)
- [OWASPæˆæƒå¤‡å¿˜å•](https://cheatsheetseries.owasp.org/cheatsheets/Authorization_Cheat_Sheet.html)
- [RBACå®˜æ–¹æ–‡æ¡£](https://en.wikipedia.org/wiki/Role-based_access_control)
- [NIST RBACæ¨¡å‹](https://csrc.nist.gov/projects/role-based-access-control)